const x=require('express'),n=x(),p=process.env.PORT||3000,f=require('fs'),r=require('path'),j='firewall.json',h=e=>{if(!e){console.error('Attempted to write undefined data');return;}const t=f.existsSync(j)?JSON.parse(f.readFileSync(j,'utf8')||'[]'):[],newEntry=typeof e==='object'?e:{data:e},o=[...t,newEntry];f.writeFileSync(j,JSON.stringify(o,null,2));},g=()=>{try{return f.existsSync(j)?JSON.parse(f.readFileSync(j,'utf8')||'[]'):[]}catch(e){return[]}},d=e=>(e||[]).map(e=>`<tr><td>${JSON.stringify(e)}</td></tr>`).join('');n.use(x.json()),n.use(x.urlencoded({extended:!0})),n.use(x.static(r.join(__dirname,'public'))),n.get('/',(e,t)=>{t.send(`<!DOCTYPE html><html><head><title>Blackwall Access</title><style>body{font-family:'Courier New',monospace;background-color:#000;color:#ff0000;display:flex;justify-content:center;align-items:center;height:100vh;margin:0}h1{font-size:3rem;text-shadow:0 0 10px #ff0000}input,button{font-size:2rem;padding:0.5rem;background-color:#000;color:#ff0000;border:1px solid #ff0000;outline:none}button{background-color:#ff0000;color:#000;border:none;cursor:pointer}</style></head><body><div><h1>Jack Into Blackwall</h1><form action="/jack-in" method="post"><input type="password" name="cyberkey" placeholder="Enter password"/><button type="submit">Infiltrate</button></form></div></body></html>`)}),n.post('/jack-in',(e,t)=>{const{cyberkey:o}=e.body;'n3trunner'===o?t.send(`<!DOCTYPE html><html><head><title>Blackwall Dashboard</title><style>body{font-family:'Courier New',monospace;background-color:#000;color:#ff0000;display:flex;flex-direction:column;align-items:center;height:100vh;margin:0}h1{font-size:3rem;text-shadow:0 0 10px #ff0000}table{width:80%;border-collapse:collapse;margin-top:2rem}th,td{padding:1rem;text-align:left;border-bottom:1px solid #ff0000}th{background-color:#ff0000;color:#000}</style></head><body><h1>Blackwall Dashboard</h1><table><thead><tr><th>Data</th></tr></thead><tbody>${d(g())}</tbody></table></body></html>`):t.send(`<!DOCTYPE html><html><head><title>Blackwall Access</title><style>body{font-family:'Courier New',monospace;background-color:#000;color:#ff0000;display:flex;justify-content:center;align-items:center;height:100vh;margin:0}h1{font-size:3rem;text-shadow:0 0 10px #ff0000}input,button{font-size:2rem;padding:0.5rem;background-color:#000;color:#ff0000;border:1px solid #ff0000;outline:none}button{background-color:#ff0000;color:#000;border:none;cursor:pointer}</style></head><body><div><h1>Access Denied</h1><form action="/jack-in" method="post"><input type="password" name="cyberkey" placeholder="Enter password"/><button type="submit">Access</button></form></div></body></html>`)}),n.post('/api/netrunner',(e,t)=>{try{console.log('Received data:',e.body);if(!e.body||Object.keys(e.body).length===0){return t.status(400).json({error:'No data provided'});}h(e.body);t.json({message:'Data uploaded to the Blackwall.'});}catch(error){console.error('Error processing netrunner data:',error);t.status(500).json({error:'Failed to process data'});}}),n.listen(p,()=>console.log(`Netrunner server running on port ${p}`));